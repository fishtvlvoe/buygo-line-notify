# Phase 13 Plan 01: LINE 綁定狀態顯示元件

## 目標

在「我的帳號」頁面顯示 LINE 綁定狀態：
- 未綁定：顯示「綁定 LINE 帳號」按鈕
- 已綁定：顯示 LINE 頭像、名稱、綁定日期、「解除綁定」按鈕

## 需求

**FRONTEND-02**: 我的帳號頁面綁定按鈕
- Hook: `woocommerce_account_dashboard` 或 WordPress 標準頁面
- 條件檢查：使用 `LineUserService::isUserLinked()`
- 已綁定時顯示：LINE 頭像 + 名稱 + 「解除綁定」按鈕

## 實作步驟

### Task 1: 建立 AccountIntegrationService

**檔案**: `includes/services/class-account-integration-service.php`

**功能**:
- `register_hooks()` - 註冊所有前台 hooks
- `render_line_binding_status()` - 渲染綁定狀態區塊
- `get_binding_data($user_id)` - 取得綁定資料（頭像、名稱、日期）

**Hooks**:
- `woocommerce_account_dashboard` - WooCommerce 我的帳號
- `show_user_profile` - WordPress 個人資料頁面（後台）
- `edit_user_profile` - WordPress 編輯用戶頁面（後台）

### Task 2: 渲染邏輯

**未綁定狀態**:
```html
<div class="buygo-line-binding-status not-linked">
    <h3>LINE 帳號綁定</h3>
    <p>綁定 LINE 帳號後，您可以使用 LINE 快速登入。</p>
    <button class="buygo-line-bind-button">綁定 LINE 帳號</button>
</div>
```

**已綁定狀態**:
```html
<div class="buygo-line-binding-status linked">
    <h3>LINE 帳號綁定</h3>
    <div class="line-profile">
        <img src="{avatar_url}" alt="LINE Avatar">
        <div class="line-info">
            <p class="line-name">{display_name}</p>
            <p class="line-date">綁定於：{link_date}</p>
        </div>
    </div>
    <button class="buygo-line-unbind-button" data-user-id="{user_id}">
        解除綁定
    </button>
</div>
```

### Task 3: 整合到 Plugin

修改 `includes/class-plugin.php`:
- 載入 `AccountIntegrationService`
- 在 `onInit()` 中註冊 hooks

### Task 4: 樣式

內聯 CSS（後續可移到獨立檔案）:
- LINE 綠色主題
- 響應式設計
- 頭像圓形顯示
- 按鈕 hover 效果

## 驗證標準

- [ ] WooCommerce 我的帳號頁面顯示綁定狀態
- [ ] 未綁定時顯示「綁定 LINE 帳號」按鈕
- [ ] 已綁定時顯示頭像、名稱、日期
- [ ] 點擊「綁定」按鈕啟動 OAuth 流程
- [ ] 樣式符合 LINE 官方規範

## 檔案清單

**新增**:
- `includes/services/class-account-integration-service.php`

**修改**:
- `includes/class-plugin.php`
